<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="utf-8"/>
<title>ConnectU - Feed</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<style type="text/tailwindcss">
    :root {
      --primary-color: #804dd5;
      --secondary-color: #3B006A;
      --background-dark: #0D0C14;
      --text-color: #E2E8F0;
      --card-bg: #161521;
    }
</style>
<script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "var(--primary-color)",
            "secondary": "var(--secondary-color)",
            "background-dark": "var(--background-dark)",
            "card-bg": "var(--card-bg)",
            "text-color": "var(--text-color)",
            "background-light": "#f6f7f8",
          },
          fontFamily: {
            "display": ["Manrope"]
          },
          borderRadius: {
            "DEFAULT": "0.5rem",
            "lg": "1rem",
            "xl": "1.5rem",
            "full": "9999px"
          },
        },
      },
    }
</script>
<style>
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    #sidebar:not(:hover) .sidebar-text { display: none; }
    #sidebar:not(:hover) .sidebar-profile-info { display: none; }
    #sidebar:not(:hover) { width: 6.5rem; }
    #sidebar:not(:hover) .sidebar-profile { justify-content: center; }
    #main-content { transition: margin-left 0.3s ease-in-out; }
    #sidebar:not(:hover) + #main-content { margin-left: 6.5rem; }
    #sidebar { transition: width 0.3s ease-in-out; }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-text-color">
<div class="flex h-screen overflow-hidden">

<aside class="fixed top-0 left-0 h-full w-80 bg-background-dark border-r border-gray-700/50 flex flex-col justify-between p-6 transition-all duration-300 ease-in-out overflow-x-hidden" id="sidebar">
  <div class="flex flex-col gap-8">
    <div class="flex items-center gap-3 sidebar-profile">
      <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12 shrink-0" style='background-image: url("assets/sankalp.png");'></div>
      <div class="sidebar-profile-info whitespace-nowrap">
        <h1 class="font-bold text-lg text-white">Sankalp Thorat</h1>
        <p class="text-sm text-gray-400">sankalp@email.com</p>
      </div>
    </div>
    <nav class="flex flex-col gap-2">
      <a class="flex items-center gap-4 px-4 py-3 rounded-lg bg-primary/20 text-primary font-bold" href="#">
        <svg class="shrink-0" fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M224,115.55V208a16,16,0,0,1-16,16H168a16,16,0,0,1-16-16V168a8,8,0,0,0-8-8H112a8,8,0,0,0-8,8v40a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V115.55a16,16,0,0,1,5.17-11.78l80-75.48.11-.11a16,16,0,0,1,21.53,0,1.14,1.14,0,0,0,.11.11l80,75.48A16,16,0,0,1,224,115.55Z"></path>
        </svg>
        <span class="sidebar-text whitespace-nowrap">Feed</span>
      </a>
       <a class="flex items-center gap-4 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 transition-colors" href="#">
            <svg class="shrink-0" fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
                <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
            </svg>
            <span class="sidebar-text whitespace-nowrap">Explore</span>
        </a>
        <a class="flex items-center gap-4 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 transition-colors" href="#">
            <!-- <svg class="shrink-0" fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
                <path d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"></path>
            </svg> -->
            <svg class="shrink-0" fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
                <path d="M128,216a8,8,0,0,1-5.66-2.34C58.34,159.4,24,129.74,24,96A64,64,0,0,1,128,32a64,64,0,0,1,104,64c0,33.74-34.34,63.4-98.34,117.66A8,8,0,0,1,128,216Z"></path>
            </svg>
            <span class="sidebar-text whitespace-nowrap">Cupid</span>
        </a>
        <a class="flex items-center gap-4 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 transition-colors" href="#">
            <svg class="shrink-0" fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
                <path d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"></path>
            </svg>
            <span class="sidebar-text whitespace-nowrap">Messages</span>
        </a>
        <a class="flex items-center gap-4 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 transition-colors" href="#">
            <svg class="shrink-0" fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
                <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM180,96a20,20,0,1,1-20-20A20,20,0,0,1,180,96ZM96,96a20,20,0,1,1-20-20A20,20,0,0,1,96,96Zm0,64a20,20,0,1,1-20-20A20,20,0,0,1,96,160Zm84,0a20,20,0,1,1-20-20A20,20,0,0,1,180,160ZM128,88a8,8,0,0,0-8,8v64a8,8,0,0,0,16,0V96A8,8,0,0,0,128,88Zm-32,0a8,8,0,0,0-8,8v64a8,8,0,0,0,16,0V96A8,8,0,0,0,96,88Zm64,0a8,8,0,0,0-8,8v64a8,8,0,0,0,16,0V96A8,8,0,0,0,160,88Z"></path>
            </svg>
            <span class="sidebar-text whitespace-nowrap">Networking</span>
        </a>
    </nav>
  </div>
    <div class="flex flex-col gap-1">
        <a class="flex items-center gap-4 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 transition-colors" href="#">
            <svg class="shrink-0" fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
                <path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"></path>
            </svg>
            <span class="sidebar-text whitespace-nowrap">Settings</span>
        </a>
        <a class="flex items-center gap-4 px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-800 transition-colors" href="#">
            <svg class="shrink-0" fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
                <path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
            </svg>
            <span class="sidebar-text whitespace-nowrap">Logout</span>
        </a>
    </div>
</aside>

<main class="ml-80 w-[calc(100%-40rem)] overflow-y-auto no-scrollbar" id="main-content">
  <header class="sticky top-0 z-10 flex items-center justify-between whitespace-nowrap border-b border-gray-700/50 bg-background-dark/80 backdrop-blur-sm px-10 py-4">
    <div class="flex items-center gap-3 text-white">
      <h2 class="text-xl font-bold">Campus Feed</h2>
    </div>
  </header>

  <div class="p-8 space-y-8">
    <div class="flex gap-4 p-4 bg-card-bg rounded-xl border border-gray-700/50">
      <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12 shrink-0" style='background-image: url("assets/sankalp.png");'></div>
      <div class="flex-1">
        <textarea id="post-input" class="w-full resize-none bg-transparent focus:outline-none placeholder-gray-400 text-lg" placeholder="What's on your mind?"></textarea>
        <div class="flex justify-between items-center mt-2">
          <button class="text-gray-400 hover:text-primary transition-colors">
            <span>Attach</span>
          </button>
          <button class="bg-primary text-white font-bold py-2 px-6 rounded-full hover:opacity-90 transition-opacity" id="post-btn">Post</button>
        </div>
      </div>
    </div>

     <div id="posts" class="space-y-6 mt-6">
      
    </div>
    
  </div>
</main>
<aside class="fixed top-0 right-0 h-full w-80 bg-background-dark border-l border-gray-700/50 flex flex-col p-6 space-y-8 overflow-y-auto no-scrollbar">
  <div>
    <h2 class="text-xl font-bold text-white mb-4">Stories</h2>
    <div class="flex gap-5 overflow-x-auto no-scrollbar pb-3">
      <div class="flex flex-col items-center gap-2 w-16 text-center shrink-0">
        <div class="size-16 rounded-full bg-center bg-no-repeat bg-cover ring-2 ring-offset-2 ring-offset-background-dark ring-primary" style='background-image: url("assets/WhatsApp\ Image\ 2025-09-23\ at\ 22.30.04_4e656b44.jpg");'></div>
        <p class="text-sm text-gray-300 truncate">Paarth</p>
      </div>
      <div class="flex flex-col items-center gap-2 w-16 text-center shrink-0">
        <div class="size-16 rounded-full bg-center bg-no-repeat bg-cover ring-2 ring-offset-2 ring-offset-background-dark ring-primary" style='background-image: url("assets/WhatsApp\ Image\ 2025-09-22\ at\ 01.59.27_7d81959f.jpg");'></div>
        <p class="text-sm text-gray-300 truncate">Divyansh</p>
      </div>
      <div class="flex flex-col items-center gap-2 w-16 text-center shrink-0">
        <div class="size-16 rounded-full bg-center bg-no-repeat bg-cover ring-2 ring-offset-2 ring-offset-background-dark ring-primary" style='background-image: url("assets/1683377320934.jpeg");'></div>
        <p class="text-sm text-gray-300 truncate">Arpit</p>
      </div>
      <div class="flex flex-col items-center gap-2 w-16 text-center shrink-0">
        <div class="size-16 rounded-full bg-center bg-no-repeat bg-cover ring-2 ring-offset-2 ring-offset-background-dark ring-primary" style='background-image: url("assets/WhatsApp\ Image\ 2025-09-19\ at\ 22.25.03_c038e2e8.jpg");'></div>
        <p class="text-sm text-gray-300 truncate">College Diaries</p>
      </div>
    </div>
  </div>

  <div>
    <h2 class="text-xl font-bold text-white mb-4">Community</h2>
    <div class="space-y-4">
      <div class="flex items-center gap-4">
        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-14" style='background-image: url("assets/gdg.png");'></div>
        <div class="flex-1">
          <p class="font-bold text-white">GDG</p>
          <p class="text-sm text-gray-400">The offical page of GDG club</p>
        </div>
        <button class="text-primary font-bold text-sm">Follow</button>
      </div>
      <div class="flex items-center gap-4">
        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-14" style='background-image: url("assets/cp.png");'></div>
        <div class="flex-1">
          <p class="font-bold text-white">Competitive Programming</p>
          <p class="text-sm text-gray-400">Code. Debug. Repeat</p>
        </div>
        <button class="text-primary font-bold text-sm">Follow</button>
      </div>
      <div class="flex items-center gap-4">
        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-14" style='background-image: url("assets/sports.png");'></div>
        <div class="flex-1">
          <p class="font-bold text-white">Sports</p>
          <p class="text-sm text-gray-400">Passion meets opportunities</p>
        </div>
        <button class="text-primary font-bold text-sm">Follow</button>
      </div>
    </div>
  </div>
</aside>

</div>

<script>
    const supabaseUrl = "https://pbuyszhhtmgaubzylmoh.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBidXlzemhodG1nYXVienlsbW9oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MDMyMDgsImV4cCI6MjA3NDM3OTIwOH0.EH7VsDZJWltw5c-dMkRab6-85ERhprXJ9uKAocco_jA";
    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

    async function loadPosts() {
        const { data, error } = await supabase
        .from("posts")
        .select("*")
        .order("created_at", { ascending: false });

        if (error) {
        console.error("Error fetching posts:", error);
        return;
        }

        const postsContainer = document.getElementById("posts");
        postsContainer.innerHTML = ""; 

        data.forEach(post => {
        const postElement = document.createElement("div");
        postElement.className = "p-4 bg-card-bg rounded-lg shadow text-white";

        postElement.innerHTML = `
            <p class="text-sm text-text-color/70 mb-2">${post.user_email}</p>
            <p class="mb-2">${post.content}</p>
            ${post.image_url ? `<img src="${post.image_url}" class="rounded-lg max-h-60"/>` : ""}
            <p class="text-xs text-text-color/50 mt-2">${new Date(post.created_at).toLocaleString()}</p>
        `;

        postsContainer.appendChild(postElement);
        });
    }

    loadPosts();

  const postButton = document.querySelector('button.bg-primary'); 
  const feedContainer = document.querySelector('#posts'); 
  const textarea = document.querySelector('textarea');

  postButton.addEventListener('click', async() => {
    const text = textarea.value.trim();
    if (!text) return;

    const { data, error } = await supabase
        .from('posts')
        .insert([{ username: "You", content: text }]) 
        .select(); 

    if (error) {
        console.error("Error adding post:", error);
        return;
    }

    const postCard = document.createElement('div');
    postCard.className = 'bg-card-bg rounded-xl overflow-hidden border border-gray-700/50';
    postCard.innerHTML = `
      <div class="p-6">
        <div class="flex items-start justify-between">
          <div class="flex items-center gap-4">
            <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBSC65UnAuRa6MQvGQbiaZ6VPVUBvjE64Q0KF7y3T1GojwsMfaZvAwjNO2mKudFyRa9kacsdZTqZM3xZkrqGTyiAQEJHDYwySHeSYuE-ZyC8SXDfyVs9t40ysQ8KQTtw9qtqn_UnsVHwv4HLoqn2rSE3mquZBx0LAfgITYHZs0eGkNQZsgJrJxTlgfUnC703b5Gi9B5LFguOpjqDyeD9AYDFDPe5YfSfm0HgYZg81akstBGgJJgGeHDLxEcirX30tW3s76U2ECTJwkI");'></div>
            <div>
              <p class="font-bold text-white">You</p>
              <p class="text-sm text-gray-400">Just now</p>
            </div>
          </div>
        </div>
        <p class="mt-4 text-text-color">${text}</p>
      </div>
      <div class="flex items-center gap-4 p-4 border-t border-gray-700/50">
        <button class="flex items-center gap-2 text-gray-400 hover:text-primary transition-colors">
          <svg fill="currentColor" height="20" viewBox="0 0 256 256" width="20" xmlns="http://www.w3.org/2000/svg">
            <path d="M128,216S28,160,28,92A52,52,0,0,1,80,40a52,52,0,0,1,48,40,52,52,0,0,1,48-40,52,52,0,0,1,52,52C228,160,128,216,128,216Zm-3-10.45c1.51-1.23,3-2.45,4.48-3.66,13.43-11,84-68.83,84-107.89a36,36,0,0,0-36-36,35.87,35.87,0,0,0-32.65,19.82,8,8,0,0,1-14.66,0A35.87,35.87,0,0,0,96,56a36,36,0,0,0-36,36c0,39.06,70.57,96.89,84,107.89,1.49,1.21,3,2.43,4.48,3.66Z"></path>
          </svg>
          <span>Like</span>
        </button>
        <button class="flex items-center gap-2 text-gray-400 hover:text-primary transition-colors">
          <svg fill="currentColor" height="20" viewBox="0 0 256 256" width="20" xmlns="http://www.w3.org/2000/svg">
            <path d="M216,48H40A16,16,0,0,0,24,64V224a15.84,15.84,0,0,0,9.37,14.66A16,16,0,0,0,40,240a15.89,15.89,0,0,0,10.27-3.87L88.54,192H216a16,16,0,0,0,16-16V64A16,16,0,0,0,216,48Zm0,128H84.89a15.89,15.89,0,0,0-10.27,3.87L40,210.3V64H216Z"></path>
          </svg>
          <span>Comment</span>
        </button>
      </div>
    `;

    feedContainer.prepend(postCard);
    textarea.value = '';
  });
</script> 

    <!-- <script>
        const supabaseUrl = "https://pbuyszhhtmgaubzylmoh.supabase.co";
        const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBidXlzemhodG1nYXVienlsbW9oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MDMyMDgsImV4cCI6MjA3NDM3OTIwOH0.EH7VsDZJWltw5c-dMkRab6-85ERhprXJ9uKAocco_jA";
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        async function loadPosts() {
            const { data, error } = await supabase
            .from("posts")
            .select("*")
            .order("created_at", { ascending: false });

            if (error) {
            console.error("Error fetching posts:", error);
            return;
            }

            const postsContainer = document.getElementById("posts");
            postsContainer.innerHTML = ""; 

            data.forEach(post => {
            const postElement = document.createElement("div");
            postElement.className = "p-4 bg-card-bg rounded-lg shadow text-white";

            postElement.innerHTML = `
                <p class="text-sm text-text-color/70 mb-2">${post.user_email}</p>
                <p class="mb-2">${post.content}</p>
                ${post.image_url ? `<img src="${post.image_url}" class="rounded-lg max-h-60"/>` : ""}
                <p class="text-xs text-text-color/50 mt-2">${new Date(post.created_at).toLocaleString()}</p>
            `;

            postsContainer.appendChild(postElement);
            });
        }

        loadPosts();
    </script> -->

</body>
</html>
